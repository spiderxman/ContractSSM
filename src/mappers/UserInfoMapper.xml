<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.masago.mapper.UserInfoMapper">
  <resultMap id="BaseResultMap" type="com.masago.bean.UserInfoBean">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="user_id" jdbcType="VARCHAR" property="userId" />
    <result column="user_name" jdbcType="VARCHAR" property="userName" />
    <result column="password" jdbcType="VARCHAR" property="password" />
    <result column="tel_number" jdbcType="VARCHAR" property="telNumber" />
    <result column="mail_address" jdbcType="VARCHAR" property="mailAddress" />
    <result column="authority_cd" jdbcType="VARCHAR" property="authorityCd" />
    <result column="memo" jdbcType="VARCHAR" property="memo" />
    <result column="del_flg" jdbcType="VARCHAR" property="delFlg" />
    <result column="create_user" jdbcType="VARCHAR" property="createUser" />
    <result column="create_date" jdbcType="DATE" property="createDate" />
    <result column="update_user" jdbcType="VARCHAR" property="updateUser" />
    <result column="update_date" jdbcType="DATE" property="updateDate" />
    <result column="authority_name" jdbcType="VARCHAR" property="authorityName" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
     user.user_id
    ,user.user_name
    ,user.password
    ,user.tel_number
    ,user.mail_address
    ,user.authority_cd
    ,user.memo
    ,user.del_flg
    ,user.create_user
    ,user.create_date
    ,user.update_user
    ,user.update_date
    ,auth.authority_name
  </sql>
  <sql id="searchBy">
  	<trim prefix="where" prefixOverrides="and|or">
  		<if test="userId != '' and userId != null">
  			user_id = #{userId, jdbcType=VARCHAR}
  		</if>
  		<if test="userName != '' and userName != null">
  			AND user.user_name like CONCAT('%',#{userName, jdbcType=VARCHAR},'%')
  		</if>
  		<if test="userRoot != '' and userRoot != null">
  			AND user.authority_cd = #{userRoot, jdbcType=VARCHAR}
  		</if>
  		<if test="delFlag != '' and delFlag != null">
  			AND user.del_flg = #{delFlag, jdbcType=VARCHAR}
  		</if>
  	</trim>
  </sql>
  <select id="selectUserInfo" resultMap="BaseResultMap">
  	select
  	<include refid="Base_Column_List"/>
  	from tb_tr_user_info user left join tb_mst_authority_info auth
  	on user.authority_cd = auth.authority_cd
  	<include refid="searchBy"/>
  	order by user.user_id asc
  </select>
  
  <insert id="insertUserInfo" parameterType="com.masago.bean.UserInfoBean">
	insert into tb_tr_user_info(
	<include refid="Base_Column_List"/>
	)
	values(
	#{userInfo.userId},
	#{userInfo.userName},
	#{userInfo.password},
	#{userInfo.telNumber},
	#{userInfo.mailAddress},
	#{userInfo.authorityCd},
	#{userInfo.memo},
	'0',
	<!-- #{userInfo.createUser}, -->
	'tang',
	sysdate(),
	<!-- #{userInfo.updateUser}, -->
	'tang',
	sysdate()
	)
  </insert>
</mapper>